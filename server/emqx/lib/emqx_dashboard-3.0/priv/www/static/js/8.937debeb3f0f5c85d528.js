webpackJsonp([8],{J8FC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"emq-resource",components:{EmqResourceDialog:a("g8ks").a},data:function(){return{dialogVisible:!1,typeIcon:{mysql:"fa-database",pgsql:"fa-database",kafka:"fa-expand",rabbitmq:"fa-expand",webhook:"fa-toggle-off",mongodb:"fa-database",redis:"fa-database"},typeName:{kafka:"Kafka",pgsql:"PostgresSQL",webhook:"WebHook",mysql:"MySQL",mongodb:"MongoDB",redis:"Redis",rabbitmq:"RabbitMQ"},list:[]}},methods:{loadData:function(){},handleCommand:function(e){var t=this,a=e.command,s=void 0===a?"create":a,n=e.item,i=void 0===n?{}:n,o=this.$refs.resourceDialog;if("create"===s)o.operator="create",this.dialogVisible=!0;else if("edit"===s){var r=i.id,l=i.type;o.record.type=l,o.resourceID=r,o.step=2,o.operator="edit",this.dialogVisible=!0}else"start"===s?this.$httpPut("/resource/"+i.id+"/"+(i.running?"load":"unload")).then(function(){t.$message.success("操作成功"),t.loadData()}):"delete"===s?this.$confirm("此操作将停用并删除该资源, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$httpDelete("/resource/"+i.id).then(function(){t.$message.success("删除成功"),t.loadData()})}).catch(function(){}):"view"===s&&(o.resourceID=i.id,o.operator="view",o.record.type=i.type,o.step=2,this.dialogVisible=!0)}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"emq-resource"},[a("div",{staticClass:"page-title"},[e._v("\n    资源\n    "),a("el-button",{staticClass:"confirm-btn",staticStyle:{float:"right"},attrs:{round:"",plain:"",type:"success",icon:"el-icon-plus",size:"medium",disabled:e.$store.state.loading},on:{click:e.handleCommand}},[e._v("\n      新建\n    ")])],1),e._v(" "),a("el-row",{staticClass:"emq-resource-list card-list",attrs:{gutter:40}},[e.list.length>0?a("div",e._l(6,function(t,s){return a("el-col",{key:s,attrs:{xs:12,sm:8}},[a("el-card",{staticClass:"list-card el-card--self btn",attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("\n            "+e._s(t.name||"资源名称")+"\n          ")]),e._v(" "),a("el-dropdown",{attrs:{placement:"bottom"},on:{command:e.handleCommand}},[a("i",{staticClass:"el-icon-more"}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{command:"edit",item:t}}},[e._v("编辑")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{command:"start",item:t}}},[e._v("\n                  "+e._s(t.running?"禁用":"启用")+"\n                ")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{command:"delete",item:t}}},[e._v("删除")])],1)],1)],1),e._v(" "),a("div",{staticClass:"item btn",on:{click:function(a){e.handleCommand({command:"view",item:t})}}},[a("ul",[a("li",[e._v("\n                服务状态：\n                "),a("i",{staticClass:"status",class:{running:t.running}}),e._v("\n                "+e._s(t.running?"运行中":"已停止")+"\n              ")]),e._v(" "),a("li",[e._v("\n                服务类型：\n                "),e._v("\n                "+e._s(e.typeName[t.type]||"其他")+"\n              ")]),e._v(" "),a("li",[e._v("\n                服务器地址：\n                "+e._s(t.server||"127.0.0.1:3306")+"\n              ")]),e._v(" "),a("li",[e._v("\n                备注：\n                "+e._s(t.description||"EMQ 资源测试服务器")+"\n              ")])])])])],1)})):a("div",{staticClass:"blank"},[a("div",{staticClass:"icon"},[a("i",{staticClass:"fa fa-server"})]),e._v(" "),a("h2",[e._v("资源")]),e._v(" "),a("p",[e._v("配置 EMQ 连接到消息存储、设备认证等外部资源。")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){e.list.push(1)}}},[e._v("新建资源")])],1)]),e._v(" "),a("emq-resource-dialog",{ref:"resourceDialog",attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}})],1)},staticRenderFns:[]};var i=a("VU/8")(s,n,!1,function(e){a("Y5y+")},null,null);t.default=i.exports},"Y5y+":function(e,t){}});